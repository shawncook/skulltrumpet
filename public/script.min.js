cooldown=!1,options={doot:document.querySelector("audio"),dooter:document.getElementById("doot"),dootEl:document.querySelector(".doots"),toggle:document.querySelector(".toggle"),tipjar:document.getElementById("tipjar")},appendTipjar=(e,t)=>{var o=document.createElement("iframe");e.tipjar.querySelector(".toggle__arrow").classList.replace("toggle__arrow","toggle__loader"),Object.assign(o,{defer:!0,height:"100%",id:"kofiframe",loading:"lazy",src:"https://ko-fi.com/skulltrumpet/?hidefeed=true&widget=true&embed=true&preview=true",title:"skulltrumpet",onload:()=>{e.tipjar.classList.toggle("open"),e.toggle.setAttribute("aria-expanded",!t),e.tipjar.querySelector(".toggle__loader").classList.replace("toggle__loader","toggle__arrow")},onerror:()=>{e.tipjar.querySelector(".toggle__loader").classList.replace("toggle__loader","toggle__arrow")}}),e.tipjar.querySelector(".tipjar__inner").appendChild(o)},flyoutToggle=e=>{var t="true"===(e.toggle?e.toggle.getAttribute("aria-expanded"):"false");gtag("event","click",{event_category:"flyout",event_label:t?"close":"open"}),t||e.tipjar.querySelector("iframe")?(e.tipjar.classList.toggle("open"),e.toggle.setAttribute("aria-expanded",!t)):appendTipjar(e,t)},flyoutClose=e=>{e=e.toggle?e.toggle.getAttribute("aria-expanded"):"false";options.toggle&&"true"===e&&flyoutToggle(options)},playAudio=()=>{options.doot.pause(),options.doot.currentTime=0,options.doot.play()},playGif=()=>{const e=options.dooter.querySelector("img"),t=e.getAttribute("src").split("?")[0];var o=t.replace(".png",".gif")+"?"+(new Date).getTime();e.src=o},incrementDoots=()=>{var e=localStorage.getItem("dootCounter");localStorage.setItem("dootCounter",parseInt(e)+1),setDoots()},handleDoot=e=>{if(e.preventDefault(),e.stopPropagation(),!cooldown){cooldown=!0;const t=e.currentTarget;return t&&(t.disabled=!0),gtag("event","click",{event_category:"button",event_label:"tumpet"}),playGif(),playAudio(),setTimeout(()=>{incrementDoots(),showNice(),t&&(t.disabled=!1),cooldown=!1},1e3),!1}},setDoots=()=>{var e=localStorage.getItem("dootCounter");options.dootEl;null!==e&&!isNaN(e)||localStorage.setItem("dootCounter",0),options.dootEl.innerHTML=e},showNice=()=>{var e=parseInt(localStorage.getItem("dootCounter")),t=420==e||69==e;const o=options.dootEl;e<0?o.setAttribute("data-tooltip","umm"):t?(o.setAttribute("data-tooltip",420===e?"blaze it":"nice"),gtag("event","click",{event_category:"button",event_label:"doots",value:e}),setTimeout(()=>{o.removeAttribute("data-tooltip")},2250)):o.removeAttribute("data-tooltip")},handleKeyup=(e,t)=>{32==e.keyCode&&handleDoot(e),27==e.keyCode&&flyoutClose(t)},bind=()=>{options.dooter.addEventListener("click",handleDoot),options.toggle.addEventListener("click",e=>flyoutToggle(options)),document.body.onkeyup=e=>handleKeyup(e,options),document.addEventListener("click",e=>{options.tipjar.contains(e.target)||flyoutClose(options)})},bind(),setDoots();