cooldown=!1,options={doot:document.querySelector("audio"),dooter:document.getElementById("doot"),dootEl:document.querySelector(".doots"),toggle:document.querySelector(".toggle"),tipjar:document.getElementById("tipjar")},appendTipjar=t=>{var e=document.createElement("iframe");Object.assign(e,{defer:!0,height:"100%",id:"kofiframe",loading:"lazy",src:"https://ko-fi.com/skulltrumpet/?hidefeed=true&widget=true&embed=true&preview=true",title:"skulltrumpet"}),t.tipjar.querySelector(".tipjar__inner").appendChild(e)},flyoutToggle=t=>{var e="true"===(t.toggle?t.toggle.getAttribute("aria-expanded"):"false");gtag("event","click",{event_category:"flyout",event_label:e?"close":"open"}),e||t.tipjar.querySelector("iframe")||appendTipjar(t),t.tipjar.classList.toggle("open"),t.toggle.setAttribute("aria-expanded",!e)},flyoutClose=t=>{t=t.toggle?t.toggle.getAttribute("aria-expanded"):"false";options.toggle&&"true"===t&&flyoutToggle(options)},playAudio=()=>{options.doot.pause(),options.doot.currentTime=0,options.doot.play()},playGif=()=>{const t=options.dooter.querySelector("img"),e=t.getAttribute("src").split("?")[0];var o=e.replace(".png",".gif")+"?"+(new Date).getTime();t.src=o},incrementDoots=()=>{var t=localStorage.getItem("dootCounter");localStorage.setItem("dootCounter",parseInt(t)+1),setDoots()},handleDoot=t=>{if(t.preventDefault(),t.stopPropagation(),!cooldown){cooldown=!0;const e=t.currentTarget;return e&&(e.disabled=!0),gtag("event","click",{event_category:"button",event_label:"tumpet"}),playGif(),playAudio(),setTimeout(()=>{incrementDoots(),showNice(),e&&(e.disabled=!1),cooldown=!1},1e3),!1}},setDoots=()=>{var t=localStorage.getItem("dootCounter");options.dootEl;null!==t&&!isNaN(t)||localStorage.setItem("dootCounter",0),options.dootEl.innerHTML=t},showNice=()=>{var t=parseInt(localStorage.getItem("dootCounter")),e=420==t||69==t;const o=options.dootEl;t<0?o.setAttribute("data-tooltip","umm"):e?(o.setAttribute("data-tooltip",420===t?"blaze it":"nice"),gtag("event","click",{event_category:"button",event_label:"doots",value:t}),setTimeout(()=>{o.removeAttribute("data-tooltip")},2250)):o.removeAttribute("data-tooltip")},handleKeyup=(t,e)=>{32==t.keyCode&&handleDoot(t),27==t.keyCode&&flyoutClose(e)},bind=()=>{options.dooter.addEventListener("click",handleDoot),options.toggle.addEventListener("click",t=>flyoutToggle(options)),document.body.onkeyup=t=>handleKeyup(t,options),document.addEventListener("click",t=>{options.tipjar.contains(t.target)||flyoutClose(options)})},bind(),setDoots();